<h1>Introduction</h1>
<p>機械設計工程系 2019 Spring 協同產品設計實習 (Introduction to Collaborative Product Design Practice)</p>
<p>倉儲: <a href="https://github.com/mdecourse/cd2019">https://github.com/mdecourse/cd2019</a></p>
<p>靜態網頁: <a href="https://mde.tw/cd2019">https://mde.tw/cd2019</a> </p>
<p>動態網頁: <a href="https://cd2019.herokuapp.com">https://cd2019.herokuapp.com</a> </p>
<p><a href="/downloads/future-of-jobs-2018-world-economic-forum.pdf">世界經濟論壇 2018 未來工作報告.pdf</a></p>
<h4>2022 年之前, 企業預計納用技術比例列表</h4>
<p><img alt="" class="with_border" height="404" src="/images/adopted_technologies_by_2022.png" width="800"/></p>
<h4>各企業穩定, 新增與多餘工作角色列表</h4>
<p><img alt="" class="with_border" height="586" src="/images/stable_new_and_redundant_roles_by_2022.png" width="800"/></p>
<h4>電腦輔助設計室與協同設計室行事曆</h4>
<p><a href="https://calendar.google.com/calendar/embed?src=mde.nfu.edu.tw_3439313938333136353439%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei&amp;mode=week&amp;src=mde.nfu.edu.tw_35303530373431313438%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei">全頁檢視</a></p>
<p><iframe height="600" src="https://calendar.google.com/calendar/embed?src=mde.nfu.edu.tw_3439313938333136353439%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei&amp;mode=week&amp;src=mde.nfu.edu.tw_35303530373431313438%40resource.calendar.google.com&amp;ctz=Asia%2FTaipei" width="800"></iframe></p>
<h4>107學年教育目標:</h4>
<p>本課程延續四技部計算機程式與電腦輔助設計實習之教學內容, 探討如何在網際協同環境進行機械產品開發.</p>
<h4>107-2學期教育目標:</h4>
<p>使用可攜程式系統, 以及 <a href="https://github.com/chiamingyen/cmsimfly">CMSimfly</a> 與<a href="https://git-scm.com/download/win"> portable Git</a> 管理各學員與分組的動態與靜態網際內容管理系統, 同時利用 <a href="https://www.onshape.com/">Onshape</a> 與 <a href="http://www.coppeliarobotics.com/">V-rep</a> 執行機電資整合產品開發, 當面臨各協同設計階段所遭遇問題時, 各學員可利用客製化程式加以解決.</p>
<h4>達成學期教育目標之評量方式與標準:</h4>
<p>評分比例:</p>
<p style="padding-left: 30px;">學員出席 (20%)</p>
<p style="padding-left: 30px;">Github 倉儲管理  (20%)</p>
<p style="padding-left: 30px;">Onshape 協同操作 (20%)</p>
<p style="padding-left: 30px;">V-rep 模擬 (20%)</p>
<p style="padding-left: 30px;">程式開發 (20%)</p>
<p>評分方式:</p>
<p style="padding-left: 30px;">CD 每週自評與互評表單: <a href="https://goo.gl/forms/qtk5fxdeGYHCeI1M2">https://goo.gl/forms/qtk5fxdeGYHCeI1M2</a> </p>
<p style="padding-left: 30px;">學員自我評量<span> (30%)</span></p>
<p style="padding-left: 30px;">分組自我評量 (30%)</p>
<p style="padding-left: 30px;">倉儲歷程查驗 (40%)</p>
<p>教學方式:</p>
<p style="padding-left: 30px;">課堂講授</p>
<p style="padding-left: 30px;">操作錄影</p>
<p style="padding-left: 30px;">學員實習</p>
<p style="padding-left: 30px;">分組報告</p><h1>實習任務</h1>
<p>2019 Spring 協同產品設計實習課程的目標</p>
<ol>
<li>讓學員得以利用 <a href="https://www.onshape.com/">Onshape</a> 以協同模式, 進行機電資有關的產品開發, 並利用 <a href="http://www.coppeliarobotics.com/">V-rep</a> 執行該產品的模擬驗證.</li>
<li><span>各學員必須每週進行學習自評與互評, 並學習如何透過內容充實 (使用夠好麥克風錄音) 的影片 (on Youtube) 發表心得.</span></li>
</ol><h2>實習任務一</h2>
<h4>學習要點</h4>
<p>本學期的課程將從各學員自行製作可攜程式系統開始, 讓各學員以團隊協同的方式整理資料, 並且推選代表進行簡報.</p>
<p>此外, 透過 ungit 的導入, 讓 git 與 github 在圖形化介面與中文提交訊息的交互應用下, 能夠更加提升學習效果.</p>
<p>最後, 本學期希望能改寫 <a href="https://github.com/chiamingyen/pygrouf">Pygrouf</a> 成為合用的網際同儕互評暨自評系統.</p>
<h4>各學員執行任務</h4>
<p>請根據 <a href="http://mde.tw/wcm2019/content/實習項目二.html">http://mde.tw/wcm2019/content/實習項目二.html</a> 中的說明:</p>
<ol>
<li>自行建立一套可攜程式系統, 並將過程製作成 3~5 分鐘的簡報, 各班每十號推選一名代表利用課堂時間進行簡報說明.</li>
<li>請設法利用 ungit 管理自己的協同產品設計實習課程網頁 (格式自選, 系統自選).</li>
<li>
<p>請以各班每十號為一組, 研讀 Git 教材: <a href="https://git-scm.com/book/zh-tw/v2">https://git-scm.com/book/zh-tw/v2</a> 並各自執行下列教材後, 推選一名代表利用課堂時間進行 3~5 分鐘的內容簡報說明.</p>
<p>Github 教材: <a href="https://lab.github.com/">https://lab.github.com/</a>  (已經以 scrum-1 帳號開始<a href="https://github.com/scrum-1/github-slideshow">學習流程</a>)</p>
</li>
</ol>
<h4>學習成果驗收</h4>
<ol>
<li>各學員確實閱讀 <a href="http://mde.tw/wcm2019/content/實習項目二.html">http://mde.tw/wcm2019/content/實習項目二.html</a><span> 中的說明, 並學會自行製作可攜程式系統.</span></li>
<li><span>各學員確實研讀 Git 教材: <a href="https://git-scm.com/book/zh-tw/v2">https://git-scm.com/book/zh-tw/v2</a><span> 內容, 能夠整理出 3~5 分鐘的簡報.</span></span></li>
<li><span><span>各學員確實執行 <a href="https://lab.github.com/">https://lab.github.com/</a><span>  中的導引內容, 並能夠整理出 3~5 分鐘的簡報.</span></span></span></li>
</ol>
<h3>建立可攜程式系統</h3>
<p>操作影片</p>
<p>安裝 Python 3.7.2</p>
<p>修改 Scripts/pip.exe 中的系統連結設定</p>
<p>HxD: <a href="https://mh-nexus.de/en/hxd/">https://mh-nexus.de/en/hxd/</a> </p>
<p>納入相關工具</p>
<p>利用 pip 安裝或移除 Python 模組</p>
<p>不同 home 的啟動設置</p>
<p><a href="https://github.com/mottosso/Qt.py">https://github.com/mottosso/Qt.py</a> (439 個 stars) 與 <a href="https://github.com/spyder-ide/qtpy">https://github.com/spyder-ide/qtpy</a> (255 個 stars) 的選擇. </p>
<p>對話: <a href="https://github.com/spyder-ide/qtpy/issues/69">https://github.com/spyder-ide/qtpy/issues/69</a> </p>
<h3>第一週分組程式</h3>
<p>"程式"中的"程"表示流程, 而"式"則指採用特定格式, 因此"程式"可以解釋為利用特定格式的語法來表達特定流程.</p>
<p>至於電腦程式 (或計算機程式), 則特指該流程是利用電腦執行, 而所謂的特定格式則指採用特定的計算機語言, 與本網誌相關的課程, 主要採用 Python, 其次還使用 Javascript, C/C++ 與 Lua 等程式語言.</p>
<p>學習計算機程式, 特定語言的語法與解題流程互為因果, 因此在過程中, 除了必須了解各程式語言的基本範式及語法外, 還需要針對解題流程中所使用的資料結構與演算法進行取捨, 對於中型以上程式, 還需選擇採用何種資料庫系統.</p>
<p>希望利用 Python 對各班學員亂數分組, 必須先了解如何讀進 (with 與 open 及 read) 各班的學員檔案, 設法將各學員的學號轉進數列 (包含利用 splitlines() , 然後導入 random, 並且了解 random.shuffle() 的用法.</p>
<p>接著在編寫學員亂數分組程式時, 則可按照下列流程配置上述各程式元件:</p>
<ol>
<li>讀進學員資料, 設法將各學員學號轉入數列</li>
<li>利用亂數模組中的 shuffle 函式, 隨機弄亂學員學號數列</li>
<li>利用重複迴圈, 從學員學號數列中一一取出, 準備進行分組</li>
<li>在迴圈中利用整數相除後取得餘數的規律, 依照每組幾人的規劃進行分組</li>
<li>在分組過程, 再設法利用數列的 append, 將各組學員學號納為分組數列</li>
<li>最後將各組數列再放入選課班級數列中備用</li>
</ol>
<p>本學期各班配合協同執行課程實習任務, 進行學員亂數分組, 以下為參考程式:</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import random
filename = 'cdbw3_student_list.txt'
# 每組人數
num_in_one_group = 11
# 組序由 1 開始
group = 1
# 各班分組後所得數列
c2019 = []
with open(filename) as f:
    # 讀進全部檔案, 轉進數列, 並同時將各行的 \n 去除
    read_data = f.read().splitlines() 
print("共有 " + str(len(read_data)) + " 位學員")
# 利用 shuffle 將數列隨機弄亂
random.shuffle(read_data)
for i in range(len(read_data)):
    # 利用整數相除的餘數進行分組
    if i%num_in_one_group == 0:
        # 列出分隔符號
        print("-"*20)
        print("group " + str(group) +":")
        # 在分組區隔時重置各組學員數列
        group_list = []
        print()
        # 同時列出與分隔標註對應 i 的數列內容
        print(read_data[i])
        group_list.append(read_data[i])
        group = group + 1
    else:
        # 逐一列出同組的其他學員
        print(read_data[i])
        group_list.append(read_data[i])
    if i%num_in_one_group == 0:
        c2019.append(group_list)
# c2019 為該班分組後所得分組數列
print(c2019)</pre>
<p>註: 第一週 cda 學員資料: <a href="https://raw.githubusercontent.com/mdecourse/cd2019/gh-pages/data/cda/cdaw1_student_list.txt">cdaw1_student_list.txt</a>, 其他相關資料在倉儲 data 目錄下.</p>
<p>另外, 本學期除學員自評外, 加入各組學員互評機制, 請各組實際根據課程評量表單取回之資料, 以程式進行處理, 並提出此一評量機制可能帶來的問題與因應方案.</p>
<h4>已知問題</h4>
<p>利用 mde At nfu At edu At tw G suite 建立自評與互評表單, 目前無法讓 gm At nfu At edu At tw 的用戶登入填表, 第一種解決方法為, 設法配合課程, 在 gm At nfu At edu At tw 網域帳號中重新建立表格, 第二種解決方案則是, 為每一學員建立 mde At nfu At edu At tw 網域下的臨時課程帳號 (課程結束後刪除).</p>
<h3>Git Book 摘要</h3>
<p><a href="https://git-scm.com/book/zh-tw/v2">https://git-scm.com/book/zh-tw/v2</a> </p>
<h4>開始</h4>
<p>使用 Git 的原因為: 希望利用分散式版次管理系統執行產品開發, 不重複存檔, 不讓各版次內容產生混淆, 且透過 Github, 可以多人協同, 並透過網際內容管理, 完整呈現開發歷程資料.</p>
<p>在 64 位元 Windows 10 環境中, 採用可攜版本, 無需安裝: <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a> </p>
<p>Git 基本設定, 利用</p>
<p>git config --global user.name ""使用者"</p>
<p>git config --global user.email "電子郵箱"</p>
<p>git config --global http.proxy http://&lt;username&gt;:&lt;password&gt;@&lt;proxy-server-url&gt;:&lt;port&gt;</p>
<p>上述設定會儲存至可攜系統的 y:\home\.gitconfig 設定檔案中, 若在不同環境中有不同設定, 可以利用 start.bat 啟動系統時, 將 home 指定到所需的目錄中即可.</p>
<h4>Git 基礎</h4>
<p>取得 Git 倉儲的方法, 一方面在近端以 git init 建立新倉儲, 或從遠端 Git 伺服器, 以 git clone 取下某一倉儲檔案.</p>
<p>之後, 新增倉儲或 clone 之倉儲, 都可以利用 git add 對倉儲新增檔案內容, 或以編輯器修改既有的檔案. 倉儲內容改版後, 可以利用 git commit -m "提交說明" 在近端對倉儲提交, 聰遠端 clone 之倉儲, 可直接利用 git push 將倉儲改版內容推送到遠端. 而在近端新增之倉儲, 則必須先利用 git remote add 加入近端倉儲與特定遠端倉儲對應之設定後, 才能以 git push 將改版內容, 推送到遠端.</p>
<p>倘若在可攜系統中導入 ungit, 可以在近端利用圖形化介面, 檢視各倉儲的改版資料, 可以免除在近端使用 git status, git log, git checkout, git diff, git tag, git show 或 git reset 的指令.</p>
<h4>使用 Git 分支</h4>
<p>參考: <a href="https://git-scm.com/book/zh-tw/v2/%E4%BD%BF%E7%94%A8-Git-%E5%88%86%E6%94%AF-%E7%B0%A1%E8%BF%B0%E5%88%86%E6%94%AF">簡述分支</a> </p>
<p>使用分支的目的, 是希望從開發主線上分離開來, 然後在不影響主線的情況下繼續工作. 一旦在分支的改版內容獲得認可, 協同者便可利用 git merge, 將分支的版本納入開發主分支,  或者合併至其他分支中.</p><h3>Github 自學</h3>
<p><a href="https://lab.github.com/">https://lab.github.com/</a> </p>
<p>Github 利用其 Issues 與 API 的程式編寫, 以網際自學架構讓使用者可以互動式流程, 學習與 Github 所提供功能有關的自學教材, 其中包括:</p>
<p>Github 簡介: <a href="https://lab.github.com/githubtraining/introduction-to-github">https://lab.github.com/githubtraining/introduction-to-github</a> </p>
<p>Html 簡介: <a href="https://lab.github.com/githubtraining/introduction-to-html">https://lab.github.com/githubtraining/introduction-to-html</a> </p>
<p>利用 Markdown 進行溝通: <a href="https://lab.github.com/githubtraining/communicating-using-markdown">https://lab.github.com/githubtraining/communicating-using-markdown</a> </p>
<p>Github Pages: <a href="https://lab.github.com/githubtraining/github-pages">https://lab.github.com/githubtraining/github-pages</a> </p>
<p>處理合併與衝突: <a href="https://lab.github.com/githubtraining/managing-merge-conflicts">https://lab.github.com/githubtraining/managing-merge-conflicts</a> </p>
<p>審核拉回請求: <a href="https://lab.github.com/githubtraining/reviewing-pull-requests">https://lab.github.com/githubtraining/reviewing-pull-requests</a> </p>
<p>利用 Travis CI 進行整合: <a href="https://lab.github.com/githubtraining/continuous-integration-with-travis-ci">https://lab.github.com/githubtraining/continuous-integration-with-travis-ci</a> </p><h3>w1取分項目</h3>
<p>本學期針對各實習任務, 加入取分項目, 各組可以將此項目分配給組員, 完成後可以在自評或互評中做為取分任務.</p>
<p>W1 任務一項目一: 在利用亂數分組, 能否根據已經完成的主程式, 編寫一個網際程式或單機 PyQt5 程式, 讀進相關資料檔案後, 在瀏覽器或 PYQt5 程式中顯示出結果.</p>
<p><span>W1 任務一項目二:  由於一開始亂數分組程式中的 bug, 導致 2a 在分組時, 只得到<a href="https://github.com/mdecourse/cd2019/blob/gh-pages/data/cda/cda_w2_result.txt">分組結果</a>, 並無分組數列, 能否編寫一個程式讀進此一分組結果, 然後列出與 <a href="https://github.com/mdecourse/cd2019/blob/gh-pages/data/cdb/cdbw3_grouping_list.txt">2b 分組結果數列</a>相同格式的資料.</span></p>
<p>W1任務一項目三: 根據 <a href="https://2019wcm.blogspot.com/search/label/ungit">https://2019wcm.blogspot.com/search/label/ungit</a> 為 ungit 寫一個使用手冊.</p>
<p></p><h2>實習任務二</h2>
<h4>學習要點</h4>
<p>此任務將逐一導入 <a href="http://www.coppeliarobotics.com/helpFiles/en/tutorials.htm">http://www.coppeliarobotics.com/helpFiles/en/tutorials.htm</a> 中的導引內容.</p>
<p>首先上場的是:</p>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/bubbleRobTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/bubbleRobTutorial.htm</a> </p>
<h4>各學員執行任務</h4>
<p>各學員完成上述 Tutorial 後, 請將個人心得放入個人的課程網頁中.</p>
<h4>分組專題</h4>
<p>請各組利用 <a href="https://www.onshape.com/">OnShape</a> 或其他 MCAD (Mechanical Computer Aided Design) 套件, 以協同模式建立手足球系統, 並將零組件輸入 <a href="http://www.coppeliarobotics.com/">V-rep</a>, 以建立可以兩兩競賽用的動態系統.</p>
<p>技術需求:</p>
<ol>
<li>建立系統所需的 3D 零組件 (利用<a href="https://www.onshape.com/"> Onshape</a> 或其他 MCAD 套件完成)</li>
<li>將零組件轉入<a href="http://www.coppeliarobotics.com/"> V-rep</a> (轉入後是否需要簡化,? 如何簡化? 如何設定模擬參數?)</li>
<li>分辨運動 (<a href="https://en.wikipedia.org/wiki/Kinematics">Kinematics</a>) 模擬與動力 (<a href="https://en.wikipedia.org/wiki/Dynamics_(mechanics)">Dynamics</a>) 模擬的差異.</li>
<li>如何設定各操縱桿的平移軸 (Prismatic <a href="http://www.coppeliarobotics.com/helpFiles/en/jointDescription.htm">Joint</a>) 運動?</li>
<li>如何設定各<span>操縱桿的旋轉軸 (Revolute <a href="http://www.coppeliarobotics.com/helpFiles/en/jointDescription.htm">Joint</a>) 運動?</span></li>
<li><span>如何設定各人偶與足球之間的碰撞<a href="http://www.coppeliarobotics.com/helpFiles/en/shapeDynamicsProperties.htm">動力</a><a href="http://www.coppeliarobotics.com/helpFiles/en/designingDynamicSimulations.htm">擊球模擬</a><a href="http://www.coppeliarobotics.com/helpFiles/en/shapeDynamicsProperties.htm"></a>?</span></li>
<li>如何利用鍵盤中的字母鍵控制操縱桿的平移軸與旋轉軸</li>
<li>如何利用程式 (<a href="http://www.coppeliarobotics.com/helpFiles/en/luaCrashCourse.htm">Lua</a> 或 <a href="http://www.coppeliarobotics.com/helpFiles/en/remoteApiFunctionsPython.htm">Python</a>) 控制<span>操縱桿的平移軸與旋轉軸</span></li>
<li><span>如何<a href="http://www.coppeliarobotics.com/helpFiles/en/proximitySensors.htm">感測</a>足球通過球門?</span></li>
<li>如何利用 <a href="http://www.coppeliarobotics.com/helpFiles/en/customUIPlugin.htm">Qt 表單</a>紀錄雙方得分?</li>
<li>人偶擊球受力時的應用分析, 可採用 <a href="https://github.com/Range-Software/range3">Range3</a> 進行分析.</li>
</ol>
<p><img alt="" height="600" src="/images/Foosball_table.jpg" width="800"/></p>
<p><img alt="" height="430" src="/images/official-foosball-table-dimensions.jpg" width="550"/></p>
<p>足球員尺寸:</p>
<p><img alt="" height="396" src="/images/foosball_player_dimension.jpg" width="500"/></p>
<p>參考: <a href="https://www.thingiverse.com/thing:1090">https://www.thingiverse.com/thing:1090</a>  and <a href="https://www.thingiverse.com/thing:2563055">https://www.thingiverse.com/thing:2563055</a> </p>
<p>足球尺寸: 36mm diameter; weighs 17 grams<br/>材料: ABS Plastic</p>
<h4>參考影片</h4>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/up2pSZ2u0Ws" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/8G6ERBz6BCc" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/heqV9_IAHV0" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/QzYcxTjRsPA" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/JPtW66z0-VQ" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/XJrNPjc2qMw" width="560"></iframe></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/0qE_a0wFRa0" width="560"></iframe></p>
<p><a href="/downloads/The_Design_of_a_Semi-Automated_Football_Table.pdf">The Design of a Semi-Automated Football Table.pdf</a></p>
<p><a href="/downloads/Automated_Football_table_thesis.pdf">Automated Football Table Thesis.pdf</a></p>
<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0" height="315" src="https://www.youtube.com/embed/sD1xugH3fjA" width="560"></iframe></p>
<p><a href="https://github.com/FoosAI/FoosAI">https://github.com/FoosAI/FoosAI</a> </p>
<p><a href="/downloads/Design_of_a_RoboCup_Shooting_Mechanism_report.pdf">Design of a RoboCup Shooting Mechanism report.pdf</a></p>
<p><a href="/downloads/Design_of_a_Ball_Handling_Mechanism_for_RoboCup report.pdf">Design of a Ball Handling Mechanism for RoboCup report.pdf</a></p>
<h4>延伸專案</h4>
<p>在 Windows 10 環境中, 以 <a href="https://www.msys2.org/">MSYS2</a> 編譯 V-rep (<a href="https://github.com/CoppeliaRobotics/v_rep">https://github.com/CoppeliaRobotics/v_rep</a>).</p>
<p><a href="https://drive.google.com/file/d/1QIiAhMf9BTvezmG-w4aIa9Oy2FYB7UIu/view?usp=sharing">V-rep 其他版次原始碼.7z</a> (1.8 GB)</p><h3>V-rep Introduction</h3>
<p>V-rep 檔案格式討論:</p>
<p><a href="http://www.forum.coppeliarobotics.com/viewtopic.php?f=7&amp;t=199">http://www.forum.coppeliarobotics.com/viewtopic.php?f=7&amp;t=199</a> </p>
<p>主要討論訴求與重點在於機電資整合產品設計, 若無法透過<span style="background-color: #ffff00;">分散式版次管理</span>釐清每一次協同人員改版的詳細歷程與內容, 將難以讓產品開發流程透明且易於維護 (持續改進).</p>
<p>作者的建議是: 儘量將設計內容以模組化 (models) 單元建構, 然後透過外部 lua 程式導入, 便可彌補目前無文字檔案 ttt 或 ttm 格式時, 無法透過分散式版次管理進行協同設計的遺憾.</p>
<p><a href="http://www.forum.coppeliarobotics.com/viewtopic.php?f=7&amp;t=2319">http://www.forum.coppeliarobotics.com/viewtopic.php?f=7&amp;t=2319</a> </p>
<p>討論重點在於: 因為運動與動力模擬系統模型所需納入的資料眾多, 且必須考慮與舊版格式相容, 加上壓縮與內容查驗上的特殊設計要求, 希望利用文字檔案建立 ttt 或 ttm 有一定的難度 (或者礙於<span style="background-color: #ffff00;">商業考量</span>), 目前只能透過既有的外部延伸程式架構進行處理.</p>
<p><a href="http://www.forum.coppeliarobotics.com/viewtopic.php?f=7&amp;t=7513">http://www.forum.coppeliarobotics.com/viewtopic.php?f=7&amp;t=7513</a></p>
<p>討論重點仍以<span style="background-color: #ffff00;">分散式版次管理</span>上的需求為主, </p>
<p><span>Without version control is almost impossible to work on a V-REP project in a team and even working alone there are several problems like not knowing which are the difference between two version of the same model/scene</span></p>
<p>但是作者的答覆與五年前一模一樣, 希望具備版次管理的開發流程, 仍需搭配模組化 models  與 Lua 或 Python 程式進行, 之後則將透過 <a href="http://www.coppeliarobotics.com/helpFiles/en/blueZeroPlugin.htm">http://www.coppeliarobotics.com/helpFiles/en/blueZeroPlugin.htm</a> 介面 (<a href="https://github.com/blueworkforce/bluezero">Bluezero 原始碼</a>), 尋求更方便的整合.</p>
<p>目前的結論為: V-rep 所揭櫫的是一種開放式創新工作模式, 利用主軸技術 (Lua 搭配 C++) 作為核心, 其餘的 GUI 或整合各式動力分析、轉檔與模型搭建, 都納為延伸模組, 從開發者的角度, 利用 Lua 與 Python 原始碼可以操控任何以 C++ 編寫的核心功能, 因此協同分散式版次管理可以在 Programming 的層次運行.</p>
<p>但就使用 GUI 流程建模的一般用戶, 若無法充分掌握 V-rep 整體程式架構, 必須透過人工方式搭建各種分析功能, 目前只能以觀賞的角度來看 V-rep 所帶出的未來機器人整合開發趨勢.</p>
<h4>V-rep 主核心程式庫</h4>
<p><a href="https://github.com/CoppeliaRobotics/v_rep">https://github.com/CoppeliaRobotics/v_rep</a> is the  V-rep core library: </p>
<p>v_rep.dll </p>
<p>libv_rep.dll.a</p>
<p>編譯上述程式庫所需設定檔案 (<a href="https://2019wcm.blogspot.com/2019/03/v-rep.html">編譯參考</a>):</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false"># location of boost headers:
    BOOST_INCLUDEPATH = "y:/boost_1_66_0"    # (e.g. Windows)
    #BOOST_INCLUDEPATH = "/usr/local/include"    # (e.g. MacOS)

# location of lua headers:
    LUA_INCLUDEPATH = "y:/lua-5.1.5/src"    # (e.g. Windows)
    #LUA_INCLUDEPATH = "../../../../../mingw64/include/lua5.1"    # (e.g. Windows-MSYS2)
    #LUA_INCLUDEPATH = "../../lua5_1_4_Linux26g4_64_lib/include"    # (e.g. Ubuntu)
    #LUA_INCLUDEPATH = "/usr/local/include/lua5.1"    # (e.g. MacOS)

# lua libraries to link:
    LUA_LIBS = "y:/lua-5.1.5/src/liblua.a"    # (e.g. Windows)
    #LUA_LIBS = -llua5.1    # (e.g. Windows-MSYS2)
    #LUA_LIBS = -L"../../lua5_1_4_Linux26g4_64_lib/" -llua5.1    # (e.g. Ubuntu)
    #LUA_LIBS = "/usr/local/lib/liblua5.1.dylib"    # (e.g. MacOS)

# qscintilla location:
    QSCINTILLA_DIR = "y:/QScintilla_gpl-2.10.2"    # (e.g. Windows)
    #QSCINTILLA_DIR = "../../QScintilla-commercial-2.7.2"    # (e.g. Windows-MSYS2)
    #QSCINTILLA_DIR = "../../QScintilla-commercial-2.7.2"    # (e.g. Ubuntu)
    #QSCINTILLA_DIR = "../../QScintilla-commercial-2.7.2"    # (e.g. MacOS)

# qscintilla headers:
    QSCINTILLA_INCLUDEPATH = "$${QSCINTILLA_DIR}/include" "$${QSCINTILLA_DIR}/Qt4Qt5"

# qscintilla libraries to link:
    QSCINTILLA_LIBS = "$${QSCINTILLA_DIR}/libqscintilla2_qt5d.dll.a"    # (e.g. Windows)
    #QSCINTILLA_LIBS = "$${QSCINTILLA_DIR}/release/release/libqscintilla2.dll.a"    # (e.g. Windows-MSYS2)    
    #QSCINTILLA_LIBS = "$${QSCINTILLA_DIR}/release/libqscintilla2.so"    # (e.g. Ubuntu)
    #QSCINTILLA_LIBS = "$${QSCINTILLA_DIR}/release/libqscintilla2.9.0.2.dylib"    # (e.g. MacOS)

# Make sure if a config.pri is found one level above, that it will be used instead of this one:
    exists(../config.pri) { include(../config.pri) }
</pre>
<p>可見 <a href="https://www.boost.org/">Boost C++ 程式庫</a>, <a href="https://www.lua.org/download.html">Lua 原始碼</a>與 <a href="https://www.riverbankcomputing.com/software/qscintilla/intro">QScintilla 原始碼</a>在 V-rep 系統中扮演重要角色.</p>
<h4>V-rep 主執行程式</h4>
<p><a href="https://github.com/CoppeliaRobotics/v_repClientApplication">https://github.com/CoppeliaRobotics/v_repClientApplication</a> is the  V-rep client application for core library:</p>
<p>vrep.exe</p>
<p>允許有 Qt GUI 或無 GUI 的介面執行, 同時載入 v_rep.dll 以及  plugin 程式庫</p>
<p><a href="https://github.com/CoppeliaRobotics/remoteApi">https://github.com/CoppeliaRobotics/remoteApi</a> 則定義 remoteAPI 的連結.</p>
<h4>V-rep 原始碼使用授權</h4>
<p>V-rep 的程式碼全部開源, 但 <a href="https://github.com/CoppeliaRobotics/dynamicsPlugin">https://github.com/CoppeliaRobotics/dynamicsPlugin</a> 與 <a href="https://github.com/CoppeliaRobotics/meshCalculationPlugin">https://github.com/CoppeliaRobotics/meshCalculationPlugin</a> 採商用或免費教育授權, 其餘原始碼採 GPL 3 授權. (詳見:<a href="http://www.coppeliarobotics.com/helpFiles/en/licensing.htm">http://www.coppeliarobotics.com/helpFiles/en/licensing.htm</a> )</p>
<h4>內建模型與場景</h4>
<p>Default Models:</p>
<p><a href="https://github.com/CoppeliaRobotics/models">https://github.com/CoppeliaRobotics/models</a> </p>
<p>Default Scenes:</p>
<p><a href="https://github.com/CoppeliaRobotics/scenes">https://github.com/CoppeliaRobotics/scenes</a> </p>
<h4>Lua 應用程式碼</h4>
<p>Lua for V-rep and Blue REALITY:</p>
<p><a href="https://github.com/CoppeliaRobotics/lua">https://github.com/CoppeliaRobotics/lua</a> </p>
<h4>其他程式庫</h4>
<p>VxMath.dll</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repMath">https://github.com/CoppeliaRobotics/v_repMath</a> </p>
<p>remoteAPI:</p>
<p><a href="https://github.com/CoppeliaRobotics/remoteApi">https://github.com/CoppeliaRobotics/remoteApi</a> </p>
<p>remoteAPi for Lua:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtLuaRemoteApiClient">https://github.com/CoppeliaRobotics/v_repExtLuaRemoteApiClient</a> </p>
<p>C++ plugin framework:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repPlusPlus">https://github.com/CoppeliaRobotics/v_repPlusPlus</a> </p>
<p>Plugin skeleton:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtPluginSkeleton">https://github.com/CoppeliaRobotics/v_repExtPluginSkeleton</a> </p>
<p>Common files for Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/common">https://github.com/CoppeliaRobotics/common</a> </p>
<p>stub generator:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repStubsGen">https://github.com/CoppeliaRobotics/v_repStubsGen</a>  (<a href="https://github.com/CoppeliaRobotics/v_repExtPluginSkeletonNG">Example</a>)</p>
<p>CAD data Import/Export Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtAssimp">https://github.com/CoppeliaRobotics/v_repExtAssimp</a> </p>
<p>Qt Custom GUI interface Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtCustomUI">https://github.com/CoppeliaRobotics/v_repExtCustomUI</a> </p>
<p>Lua parser Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtLuaParser">https://github.com/CoppeliaRobotics/v_repExtLuaParser</a> </p>
<p>Video recorder library:</p>
<p><a href="https://github.com/CoppeliaRobotics/videoRecorder">https://github.com/CoppeliaRobotics/videoRecorder</a> </p>
<p>use LuaJIT in stead of Lua library:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repLuaLibrary">https://github.com/CoppeliaRobotics/v_repLuaLibrary</a> </p>
<p>Convex hull library:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtQhull">https://github.com/CoppeliaRobotics/v_repExtQhull</a> </p>
<p>Image Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtImage">https://github.com/CoppeliaRobotics/v_repExtImage</a> </p>
<p>ROS interface Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtRosInterface">https://github.com/CoppeliaRobotics/v_repExtRosInterface</a> </p>
<p>Surface reconstruction Plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtSurfaceReconstruction">https://github.com/CoppeliaRobotics/v_repExtSurfaceReconstruction</a> </p>
<p>Cloud point matching plugin:</p>
<p><a href="https://github.com/CoppeliaRobotics/v_repExtICP">https://github.com/CoppeliaRobotics/v_repExtICP</a> </p><h3>BubbleRob</h3>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/bubbleRobTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/bubbleRobTutorial.htm</a> </p>
<p>操作步驟參考: <a href="http://fid.cl/courses/ai-robotics/vrep-tut/tutorial_VREP_bob.pdf">http://fid.cl/courses/ai-robotics/vrep-tut/tutorial_VREP_bob.pdf</a>  (<a href="/downloads/tutorial_VREP_bob.pdf">tutorial_VREP_bob.pdf</a>)</p>
<p><a href="/downloads/introduction_to_robotics_mechanics_planning_and_control.pdf">introduction_to_robotics_mechanics_planning_and_control.pdf</a></p>
<p><a href="/downloads/ModernRobotics.zip">modern_robotics.zip</a></p>
<p><a href="/downloads/ModernRobotics_lib.7z">modern_robotics_lib.zip</a> (<a href="https://github.com/NxRLab/ModernRobotics">https://github.com/NxRLab/ModernRobotics</a> )</p>
<p><a href="/downloads/IKexercise.pdf">Inverse Kinematics.pdf</a></p>
<p><a href="/downloads/MR_practice_exercises.pdf">modern_robotics_exercise.pdf</a></p>
<p>V-rep Introduction: <a href="http://hades.mech.northwestern.edu/index.php/V-REP_Introduction">http://hades.mech.northwestern.edu/index.php/V-REP_Introduction</a> </p>
<p>Get started with V-rep: <a href="http://hades.mech.northwestern.edu/index.php/Getting_Started_with_the_V-REP_Simulator">http://hades.mech.northwestern.edu/index.php/Getting_Started_with_the_V-REP_Simulator</a> </p>
<h4>動態模擬考量</h4>
<p>If we run the simulation again, we can notice that both objects do not interfere<br/>anymore. However, we notice that BubbleRob slightly moves, even with locked motor.</p>
<p>We also try to run the simulation with different physics engines: the result will be<br/>different. Stability of dynamic simulations is tightly linked to masses and inertias of<br/>the involved non-static shapes.</p>
<p>This has to do with the objects masses: Keep masses similar and not too light.<br/>When linking two shapes with a dynamically enabled joint or a dynamically enabled<br/>force sensor, make sure the two shape’s masses are not too different (m1 &lt; 10 ∗ m2<br/>and m2 &lt; 10 ∗ m1), otherwise the joint or force sensor might be very soft and wobbly<br/>and present large positional/orientational errors (this effect can however also be used<br/>as a natural damping sometimes).</p>
<p>Additionally, very low mass shapes should be avoided since they won’t be able to<br/>exert very large forces onto other shapes (even if propelled by high force actuators!).<br/>Lastly, the intertia has a role to play: Keep principal moments of inertia* relatively<br/>large.</p>
<p>Try keeping the principal moments of inertia / mass (*refer to the shape dynamics<br/>properties dialog) relatively large, otherwise mechanical chains might be difficult to<br/>control and/or might behave in a strange way.</p>
<p>Therefore, we need to multiply all involved object’s masses by 8</p>
<h4>建立 Model</h4>
<p><span>We now need to finish </span><strong>BubbleRob</strong><span><span> </span>as a<span> </span></span><a href="http://www.coppeliarobotics.com/helpFiles/en/models.htm">model</a><span><span> </span>definition. We select the model base (i.e. object<span> </span></span><em>bubbleRob</em><span>) then check items<span> </span></span><strong>Object is model base</strong><span><span> </span>and<span> </span></span><strong>Object/model can transfer or accept DNA</strong><span><span> </span>in the<span> </span></span><a href="http://www.coppeliarobotics.com/helpFiles/en/commonPropertiesDialog.htm">object common properties</a><span>: there is now a stippled bounding box that encompasses all objects in the model hierarchy. </span></p>
<p><span>We select the two joints, the proximity sensor and the graph, then enable item<span> <strong>Ignored by model bounding box</strong></span></span><span><span> </span>and click<span> </span></span><strong>Apply to selection</strong><span>, in the same dialog: the model bounding box now ignores the two joints and the proximity sensor. Still in the same dialog, we disable<span> </span></span><strong>camera visibility layer</strong><span><span> </span>2, and enable<span> </span></span><strong>camera visibility layer</strong><span><span> </span>10 for the two joints and the force sensor: this effectively hides the two joints and the force sensor, since layers 9-16 are disabled by default. </span></p>
<p><span>At any time we can<span> </span></span><a href="http://www.coppeliarobotics.com/helpFiles/en/layerSelectionDialog.htm">modify the visibility layers for the whole scene</a><span>. To finish the model definition, we select the vision sensor, the two wheels, the slider, and the graph, then enable item<span> </span></span><strong>Select base of model instead</strong><span>: if we now try to select an object in our model in the scene, the whole model will be selected instead, which is a convenient way to handle and manipulate the whole model as a single object.</span></p>
<p><span> Additionally, this protects the model against inadvertant modification. Individual objects in the model can still be selected in the scene by click-selecting them with control-shift, or normally selecting them in the scene hierarchy. We finally collapse the model tree in the scene hierarchy. This is what we have:</span></p>
<h4><span>新增 Vision Sensor</span></h4>
<p><span>Next we will add a vision sensor, at the same position and orientation as BubbleRob's proximity sensor. We open the model hierarchy again, then click [Menu bar --&gt; Add --&gt; Vision sensor --&gt; Perspective type], then attach the vision sensor to the proximity sensor, and set the local position and orientation of the vision sensor to (0,0,0). </span></p>
<p><span>We also make sure the vision sensor is not not visible, not part of the model bounding box, and that if clicked, the model will be selected instead. In order to customize the vision sensor, we open its properties dialog. We set the Far clipping plane item to 1, and the Resolution x and Resolution y items to 256 and 256. </span></p>
<p><span>We then open the vision sensor filter dialog by clicking Show filter dialog. We select the filter component Edge detection on work image and click Add filter. We position the newly added filter in second position (one position up, using the up button). We double-click the newly added filter component and adjust its Threshold item to 0.2, then click OK. We add a floating view to the scene, and over the newly added floating view, right-click [Popup menu --&gt; View --&gt; Associate view with selected vision sensor] (we make sure the vision sensor is selected during that process). </span></p>
<p><span>To be able to see the vision sensor's image, we start the simulation, then stop it again.<br/>The last thing that we need for our scene is a small child script that will control BubbleRob's behavior. We select bubbleRob and click [Menu bar --&gt; Add --&gt; Associated child script --&gt; Non threaded]. This just added a non-threaded child script to the scene, and associated it with bubbleRob. </span></p>
<p><span>We can also add, remove or modify scripts via the script dialog which can be opened with [Menu bar --&gt; Tools --&gt; Scripts] or through the appropriate toolbar button:</span></p>
<h4><span>Lua 控制程式</span></h4>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function speedChange_callback(ui,id,newVal)
    speed=minMaxSpeed[1]+(minMaxSpeed[2]-minMaxSpeed[1])*newVal/100
end

function sysCall_init()
    -- This is executed exactly once, the first time this script is executed
    bubbleRobBase=sim.getObjectAssociatedWithScript(sim.handle_self) -- this is bubbleRob's handle
    leftMotor=sim.getObjectHandle("bubbleRob_leftMotor") -- Handle of the left motor
    rightMotor=sim.getObjectHandle("bubbleRob_rightMotor") -- Handle of the right motor
    noseSensor=sim.getObjectHandle("bubbleRob_sensingNose") -- Handle of the proximity sensor
    minMaxSpeed={50*math.pi/180,300*math.pi/180} -- Min and max speeds for each motor
    backUntilTime=-1 -- Tells whether bubbleRob is in forward or backward mode
    -- Create the custom UI:
        xml = '&lt;ui title="'..sim.getObjectName(bubbleRobBase)..' speed" closeable="false" resizeable="false" activate="false"&gt;'..[[
        &lt;hslider minimum="0" maximum="100" onchange="speedChange_callback" id="1"/&gt;
        &lt;label text="" style="* {margin-left: 300px;}"/&gt;
        &lt;/ui&gt;
        ]]
    ui=simUI.create(xml)
    speed=(minMaxSpeed[1]+minMaxSpeed[2])*0.5
    simUI.setSliderValue(ui,1,100*(speed-minMaxSpeed[1])/(minMaxSpeed[2]-minMaxSpeed[1]))
end

function sysCall_actuation()
    result=sim.readProximitySensor(noseSensor) -- Read the proximity sensor
    -- If we detected something, we set the backward mode:
    if (result&gt;0) then backUntilTime=sim.getSimulationTime()+4 end 

    if (backUntilTime&lt;sim.getSimulationTime()) then
        -- When in forward mode, we simply move forward at the desired speed
        sim.setJointTargetVelocity(leftMotor,speed)
        sim.setJointTargetVelocity(rightMotor,speed)
    else
        -- When in backward mode, we simply backup in a curve at reduced speed
        sim.setJointTargetVelocity(leftMotor,-speed/2)
        sim.setJointTargetVelocity(rightMotor,-speed/8)
    end
end

function sysCall_cleanup()
	simUI.destroy(ui)
end</pre>
<h4>Building Clean Model</h4>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/buildingAModelTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/buildingAModelTutorial.htm</a> </p>
<h4>Designing Dynamic Simulation</h4>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/designingDynamicSimulations.htm#staticAndRespondable">http://www.coppeliarobotics.com/helpFiles/en/designingDynamicSimulations.htm#staticAndRespondable</a> </p>
<h4>ResizeableFloor</h4>
<p>網際 Lua 程式執行環境: <a href="http://mde.tw/vecp2018/lua/SchoolProject/">http://mde.tw/vecp2018/lua/SchoolProject/</a> </p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    model=sim.getObjectAssociatedWithScript(sim.handle_self)
    e1=sim.getObjectHandle('ResizableFloor_5_25_element')
    e2=sim.getObjectHandle('ResizableFloor_5_25_visibleElement')
end

function sysCall_cleanup()
    hideDlg()
end

function sysCall_nonSimulation()
    local s=sim.getObjectSelection()
    if s and #s&gt;=1 and s[1]==model then
        showDlg()
    else
        hideDlg()
    end
end

function sysCall_beforeSimulation()
    hideDlg()
end

function sysCall_beforeSimulation()
    hideDlg()
end

function updateFloor()
    local c=readInfo()
    local sx=c['sizes'][1]/5
    local sy=c['sizes'][2]/5
    local sizeFact=sim.getObjectSizeFactor(model)
    sim.setObjectParent(e1,-1,true)
    local child=sim.getObjectChild(model,0)
    while child~=-1 do
        sim.removeObject(child)
        child=sim.getObjectChild(model,0)
    end
    local xPosInit=(sx-1)*-2.5*sizeFact
    local yPosInit=(sy-1)*-2.5*sizeFact
    local f1,f2
    for x=1,sx,1 do
        for y=1,sy,1 do
            if (x==1)and(y==1) then
                sim.setObjectParent(e1,model,true)
                f1=e1
            else
                f1=sim.copyPasteObjects({e1},0)[1]
                f2=sim.copyPasteObjects({e2},0)[1]
                sim.setObjectParent(f1,model,true)
                sim.setObjectParent(f2,f1,true)
            end
            local p=sim.getObjectPosition(f1,sim.handle_parent)
            p[1]=xPosInit+(x-1)*5*sizeFact
            p[2]=yPosInit+(y-1)*5*sizeFact
            sim.setObjectPosition(f1,sim.handle_parent,p)
        end
    end
end

function getDefaultInfoForNonExistingFields(info)
    if not info['version'] then
        info['version']=0
    end
    if not info['sizes'] then
        info['sizes']={1,1}
    end
end

function readInfo()
    local data=sim.readCustomDataBlock(model,'XYZ_FLOOR_INFO')
    if data then
        data=sim.unpackTable(data)
    else
        data={}
    end
    getDefaultInfoForNonExistingFields(data)
    return data
end

function writeInfo(data)
    if data then
        sim.writeCustomDataBlock(model,'XYZ_FLOOR_INFO',sim.packTable(data))
    else
        sim.writeCustomDataBlock(model,'XYZ_FLOOR_INFO','')
    end
end

function updateUi()
    local c=readInfo()
    local sizeFact=sim.getObjectSizeFactor(model)
    simUI.setLabelText(ui,1,'X-size (m): '..string.format("%.2f",c['sizes'][1]*sizeFact),true)
    simUI.setSliderValue(ui,2,c['sizes'][1]/5,true)
    simUI.setLabelText(ui,3,'Y-size (m): '..string.format("%.2f",c['sizes'][2]*sizeFact),true)
    simUI.setSliderValue(ui,4,c['sizes'][2]/5,true)
end

function sliderXChange(ui,id,newVal)
    local c=readInfo()
    c['sizes'][1]=newVal*5
    writeInfo(c)
    updateUi()
    updateFloor()
end

function sliderYChange(ui,id,newVal)
    local c=readInfo()
    c['sizes'][2]=newVal*5
    writeInfo(c)
    updateUi()
    updateFloor()
end

function closeEventHandler(h)
    sim.removeScript(sim.handle_self)
end

function showDlg()
    if not ui then
    xml = [[
&lt;ui title="Floor Customizer" closeable="true" on-close="closeEventHandler" resizable="false" activate="false"&gt;
    &lt;group layout="form" flat="true"&gt;
        &lt;label text="X-size (m): 1" id="1"/&gt;
        &lt;hslider tick-position="above" tick-interval="1" minimum="1" maximum="5" on-change="sliderXChange" id="2"/&gt;
        &lt;label text="Y-size (m): 1" id="3"/&gt;
        &lt;hslider tick-position="above" tick-interval="1" minimum="1" maximum="5" on-change="sliderYChange" id="4"/&gt;
    &lt;/group&gt;
    &lt;label text="" style="* {margin-left: 400px;}"/&gt;
&lt;/ui&gt;
]]
        ui=simUI.create(xml)
        if 2==sim.getInt32Parameter(sim.intparam_platform) then
            -- To fix a Qt bug on Linux
            sim.auxFunc('activateMainWindow')
        end
        updateUi()
    end
end

function hideDlg()
    if ui then
        simUI.destroy(ui)
        ui=nil
    end
end
</pre>
<p></p><h2>實習任務三</h2>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/buildingAModelTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/buildingAModelTutorial.htm</a> </p>
<p>機械設計中的 Kinematic and Dynamic Modeling 中有許多建立模型的技巧, 在運用 <a href="http://www.coppeliarobotics.com/">V-rep</a> 進行運動與動態模擬的過程中, 除了利用 <a href="http://solvespace.com">Solvespace</a> 或 <a href="https://www.onshape.com/">OnShape</a> 繪製系統所牽涉的零組件外, 還必須考慮模擬過程的實用性, 意即在機械系統概念設計初步階段, 必須要先掌握各零組件基本的運動與動態特性, 不必將零組件仍無法明確設計的特徵尺寸置入.</p>
<p>在這個實習任務中, 可以學習如何建立適用於 <a href="http://www.coppeliarobotics.com/">V-rep</a> 的零件模型.</p>
<h4>延伸任務</h4>
<p><a href="https://www.freecadweb.org/">https://www.freecadweb.org/</a> 目前已經能夠支援利用 Python3 程式建立模型 (<a href="https://www.freecadweb.org/wiki/Python_3">註 1</a>, <a href="https://forum.freecadweb.org/viewtopic.php?t=30218">2</a>, <a href="https://github.com/FreeCAD/pivy">3</a>), 當建立與機械設計運動及動態模擬過程中, 最佳的零組件提供方案, 是透過各商用 MCAD 套件的 API 環境, 以電腦程式建構零組件, 因為此舉可以將更多與機械設計流程考量的約束條件置入, 以整合性更高的方式進行機械設計.</p>
<p>不過目前各商用 MCAD 套件的網際 API 程式環境較高, 此處希望以 <a href="http://solvespace.com">Solvespace</a> 中的 Solver (<a href="https://github.com/KmolYuan/python-solvespace">https://github.com/KmolYuan/python-solvespace</a>), 或 <a href="https://www.freecadweb.org/">FreeCAD</a> 作為範例, 嘗試以可攜程式方法結合 <a href="http://www.coppeliarobotics.com/">V-rep</a>, 自行建立所需的網際協同機械設計環境.</p>
<p>其他有關 Onshape 的 API 參考:</p>
<p style="padding-left: 30px;"><a href="https://forum.onshape.com/discussion/4030/where-can-i-find-the-apis-and-api-documentation-for-onshape-how-much-functionality-the-apis-cover">https://forum.onshape.com/discussion/4030/where-can-i-find-the-apis-and-api-documentation-for-onshape-how-much-functionality-the-apis-cover</a> </p>
<p style="padding-left: 30px;"><a href="https://github.com/onshape-public/apikey">https://github.com/onshape-public/apikey</a> </p>
<p style="padding-left: 30px;"><a href="https://github.com/onshape-public/app-windows-sample">https://github.com/onshape-public/app-windows-sample</a> </p>
<p></p><h2>實習任務四</h2>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/lineFollowingBubbleRobTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/lineFollowingBubbleRobTutorial.htm</a> </p>
<h4>延伸應用</h4>
<p>以 Python 控制 V-rep 模型: <a href="http://fid.cl/courses/ai-robotics/vrep-tut/pythonBubbleRob.pdf">http://fid.cl/courses/ai-robotics/vrep-tut/pythonBubbleRob.pdf</a> (<a href="/downloads/pythonBubbleRob.pdf">pythonBubbleRob.pdf</a>)</p>
<p>e-puck 控制範例: data/v-rep/e-puck_control_ex/</p><h2>實習任務五</h2>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/inverseKinematicsTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/inverseKinematicsTutorial.htm</a> </p>
<h2>實習任務六</h2>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/externalControllerTutorial.htm">http://www.coppeliarobotics.com/helpFiles/en/externalControllerTutorial.htm</a> </p>
<p><a href="https://github.com/kmolab/pymcadp/tree/gh-pages/data/v-rep/vrep-api-python-demo">https://github.com/kmolab/pymcadp/tree/gh-pages/data/v-rep/vrep-api-python-demo</a> </p>
<p></p><h1>協同設計</h1>
<p>協同產品設計實習的三項內容管理系統 (Content Management Systems) 包含</p>
<p><a href="https://github.com/chiamingyen/cmsimfly">CMSimfly</a> (循序頁面電子書) - 各組網際協同產品設計規劃與使用說明電子書</p>
<p><a href="https://revealjs.com/#/">Reveal</a> (網際簡報系統) - 每一協同設計階段完成的簡要報告</p>
<p><a href="https://blog.getpelican.com/">Pelican Blog</a> (靜態網誌) - 依照日期紀錄各協同階段工作內容與結論</p>
<p>下載可攜程式環境: <a href="https://drive.google.com/file/d/1Cw8mHRcHKIZj7K7_m6x_af4vzo89539a/view?usp=sharing">kmol_2019.7z</a> (380MB, 解開約 1.5 GB)</p>
<h4>開發要點</h4>
<ol>
<li>多人協同編輯的 CMSimfly</li>
<li>近端網際 Reveal 編輯環境</li>
<li>更容易使用的 Pelican 靜態網誌轉換系統</li>
</ol>
<h4>機械設計內容表達</h4>
<p>利用 <a href="https://github.com/chiamingyen/cmsimfly">CMSimfly</a> 進行口語、文字、2D 靜態檔案、3D 與動態影音、數學與實體表達.</p>
<p>口語表達 - 透過 Reveal.js 簡報協助隨時進行機械設計內容介紹與解說.</p>
<p>文字表達 - 編寫在內容管理系統中的中英文資料.</p>
<p>2D 靜態檔案 - images 與 pdf  等靜態檔案.</p>
<p>3D 與動態影音 - X3D, three.js 或 mp4 等動態資料.</p>
<p>數學表達 - 在內容管理系統中提供與機械設計相關的數學表示式及數學模型.</p>
<p>實體表達 - 將上述各階段所說明的機械設計系統零組件檔案, 經由實際加工製作成實體, 後以其他表達方式進行說明與介紹.</p>
<p></p><h1>Onshape</h1>
<h4>特性</h4>
<p>現有免費的整合 CAX 系統, 應力分析, render, CAM?</p>
<p>Featurescript 在協同產品開發流程中的角色</p>
<p><a href="https://github.com/onshape">https://github.com/onshape</a> </p>
<h2>BOMs</h2>
<p><a href="https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16985/First-Look-Onshape-Enterprise.aspx">https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16985/First-Look-Onshape-Enterprise.aspx</a>  (<a href="/downloads/FirstLook_OnshapeEnterprise _ ENGINEERING_com.pdf">pdf</a>)</p>
<h4>發布管理</h4>
<p style="padding-left: 30px;"><a href="https://en.wikipedia.org/wiki/Release_management">https://en.wikipedia.org/wiki/Release_management</a> </p>
<p style="padding-left: 30px;"><a href="https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16672/Onshape-Adds-Release-Management-Revamps-BOMs.aspx">https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16672/Onshape-Adds-Release-Management-Revamps-BOMs.aspx</a>  (<a href="/downloads/OnshapeAddsReleaseManagementRevampsBOMs _ ENGINEERING_com.pdf">pdf</a>)</p>
<h4>參數建模與直接建模</h4>
<p style="padding-left: 30px;"><a href="https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16587/Whats-the-Difference-Between-Parametric-and-Direct-Modeling.aspx">https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16587/Whats-the-Difference-Between-Parametric-and-Direct-Modeling.aspx</a>  (<a href="/downloads/What’s theDifferenceBetweenParametric_and_DirectModeling_ENGINEERING_com.pdf">pdf</a>)</p>
<p style="padding-left: 30px;"><a href="https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16304/We-Just-Remade-Parametric-Modeling-Says-Onshape.aspx">https://www.engineering.com/DesignSoftware/DesignSoftwareArticles/ArticleID/16304/We-Just-Remade-Parametric-Modeling-Says-Onshape.aspx</a>  (<a href="/downloads/WeJustRemadeParametricModelingSaysOnshape _ ENGINEERING_com.pdf">pdf</a>)</p>
<p><a href="/downloads/現代CAD機器設計.pdf">現代CAD機器設計.pdf</a></p>
<p><a href="/downloads/精通3D模擬.pdf">精通3D模擬.pdf</a></p>
<p><a href="/downloads/2018CAD技術趨勢.pdf">2018CAD技術趨勢.pdf</a></p>
<p><a href="/downloads/開解設計僵局.pdf">開解設計僵局.pdf</a></p>
<p><a href="/downloads/技術提示1.pdf">技術提示1.pdf</a></p>
<p><a href="/downloads/敏捷產品設計簡介.pdf">敏捷產品設計簡介.pdf</a></p>
<p><a href="/downloads/NI_Mechatronics_Machine_Design_Guide.pdf">NI_Mechatronics_Machine_Design_Guide.pdf</a></p>
<p>c-k theory: <a href="https://mde1a1.kmol.info/2017fall/wiki?name=c-k+design+theory">https://mde1a1.kmol.info/2017fall/wiki?name=c-k+design+theory</a> </p>
<p></p><h1>V-rep</h1>
<p>source: <a href="http://hades.mech.northwestern.edu/index.php/Getting_Started_with_the_V-REP_Simulator">http://hades.mech.northwestern.edu/index.php/Getting_Started_with_the_V-REP_Simulator</a> </p>
<p>Now that you have the<span> </span><a class="external text" href="https://github.com/NxRLab/ModernRobotics" rel="nofollow">MR code library</a>, you need the cross-platform V-REP robot simulator to allow you to visualize the motions of robots.<span> </span><b>You should complete the items on this page before moving on with the rest of the course!</b><span> </span>Click on any of the images to make them larger.</p>
<p><b>V-REP is computationally intensive. To minimize power usage, make sure to "pause" or "stop" a simulation when you are not using it.</b></p>
<p><b>1.</b><span> </span>Go to<span> </span><a class="external free" href="http://www.coppeliarobotics.com/" rel="nofollow">http://www.coppeliarobotics.com/</a><span> </span>and download and install the free V-REP PRO EDU software for your operating system.</p>
<p><b>2.</b><span> </span>Launch V-REP and experiment with it. I suggest you choose File &gt; Open scene... and open one of the example "scenes" that comes with V-REP. V-REP "scenes" are specifications of environments, robots, and their actions, and when you press the "play" button the simulation begins. Experimenting with these scenes will show you some of the capabilities of V-REP. For example, you could choose the "motionPlanningAndGrasping.ttt" scene, as shown in the image below. (All scene files end in .ttt.)</p>
<p><img alt="" height="534" src="/images/700px-VREP-demo-open.png" width="700"/></p>
<p><a href="/downloads/v-rep_remoteapi_ex.7z">v-rep_remoteapi_ex.7z</a></p><h2>V-rep Tutorial</h2>
<p><a href="http://www.coppeliarobotics.com/helpFiles/en/tutorials.htm">http://www.coppeliarobotics.com/helpFiles/en/tutorials.htm</a> </p>
<p>V-rep Tutorial:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/RZ-TCmL55c8" width="560"></iframe><span></span></p>
<p>Line Following Robot:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/xI-ZEewIzzI" width="560"></iframe><span></span></p>
<p>V-rep Scripts Writing:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/Zt21o1qsOB4" width="560"></iframe><span></span></p>
<p>Python Robot Simulation:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/SQont-mTnfM" width="560"></iframe><span></span></p>
<p>Path Planning:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/OfpB87pRoUk" width="560"></iframe><span></span></p>
<p>Dynamic Module:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/h9DXTRUmEEE" width="560"></iframe><span></span></p>
<p>V-rep Introduction and Bump Sensors:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/w68jmN1IBpo" width="560"></iframe><span></span></p>
<p>Inverse Kinematics:</p>
<p><iframe allowfullscreen="allowfullscreen" data-mce-fragment="1" frameborder="0" height="315" src="https://www.youtube.com/embed/X73NzCc2E2c" width="560"></iframe><span></span></p>
<p>scene 模擬場景 - 包含環境與各種物件</p>
<p>scene object 場景中的物件 [http://www.coppeliarobotics.com/helpFiles/en/objects.htm] 包含</p>
<p>shape 零組件形體</p>
<p>camera 攝影機</p>
<p>light 光源</p>
<p>dummy 虛體 - 由一個有方位的點表示,沒有形體內容但具有形體性質的特殊物件</p>
<p>graph 圖形</p>
<p>path 路徑</p>
<p>mirror 鏡</p>
<p>point cloud 點雲</p>
<p>joint 軸</p>
<p>proximity sensor 近接感測器</p>
<p>vision sensor 視覺感測器</p>
<p>force/torque sensor 力/矩感測器</p>
<p>mill 銑</p>
<p>octree 八叉樹狀結構</p>
<p>model 場景中的模型</p>
<p>page 頁 - 每一個場景至多內置 8 個頁面, 每一個頁面則可以內置不限數量的視圖 (views), 頁面可視為視圖的容器.</p>
<p>view 視圖 - 透過攝影機、圖型或視覺感測器取的資料, 用於顯示場景內容.</p>
<h4>Main Script</h4>
<p>A main script is a simulation script. By default, each scene in V-REP will have one main script. It contains the basic code that allows a simulation to run. Without main script, a running simulation won't do anything.</p>
<p>The main script is called at each simulation step exactly one time. In addition to that, it is called once during initialization (at the start of a simulation), and once during restoration (at the end of a simulation). Thus, the default main script is segmented in 3 parts:</p>
<h4>the initialization part</h4>
<p><span>: this part will be executed one time just at the beginning of a simulation. The code is in charge of preparing a simulation, etc.</span></p>
<h4>the regular part</h4>
<p><span>: this part will be executed at each simulation pass. The code is in charge of handling all the functionality of the simulator (inverse kinematics, proximity sensors, collision detection, dynamics, etc.) in a generic way. Two commands are of particular interest: simLaunchThreadedChildScripts and simHandleChildScripts. simLaunchThreadedChildScripts launches threaded child scripts, while simHandleChildScripts runs non-threaded child scripts. Without those commands, child scripts won't be executed, and specific model functionality or behavior won't operate. The regular part is divided into an actuation (or action/reaction) section and a sensing (or probing) section.</span></p>
<h4>the restoration part</h4>
<p><span>: this part will be executed one time just before a simulation ends. The code is in charge of restoring object's initial configuration, clearing sensor stat</span></p>